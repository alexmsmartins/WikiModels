<lift:surround with="default" at="content">
  <div  name="some-div" id="some-div">
    <head>
      <script id="xslttransform" type="text/javascript">
      /* <![CDATA[ */
         function loadXMLDoc(dname)
         {
      $.log("Executando loadXMLDoc(dname)")
      if (window.XMLHttpRequest)
        {
        xhttp=new XMLHttpRequest();
        }
      else
        {
        xhttp=new ActiveXObject("Microsoft.XMLHTTP");
        }
      xhttp.open("GET",dname,false);
      xhttp.send("");
      return xhttp.responseXML;
      }

       function displayResult()
      {
      xml=loadXMLDoc("mathml_content.xml");

      xsl=loadXMLDoc("/xslt/mathmlc2p.xsl");

      var content_math = $("#ondivload2");
      if(content_math == null)
        {
        $.log("content_math is null");
      } else {
        $.log("content_math not null");
        $.log(content_math);
        $.log("After content_math");
      }

      $.log("Content mathml in page is " + $("#ondivload2").html() );

      // code for IE
      if (window.ActiveXObject)
        {
        ex=xml.transformNode(xsl);
        document.getElementById("formula").innerHTML=$("#ondivload2").html();
        }
      // code for Mozilla, Firefox, Opera, etc.
      else if (document.implementation && document.implementation.createDocument)
        {
        xsltProcessor=new XSLTProcessor();
        xsltProcessor.importStylesheet(xsl);
        resultDocument = xsltProcessor.transformToFragment(xml,document);
        document.getElementById("formula").appendChild(resultDocument);
        }
       }
      /* ]]> */
      </script>
    </head>
    <script id="mathjax" src="/MathJax/MathJax.js" type="text/javascript" >
    /* <![CDATA[ */
    $(document).ready(function() {
    MathJax.Hub.Config({
   config: ["MMLorHTML.js"],
   extensions: ["tex2jax.js", "mml2jax.js"],
   jax: ["input/TeX", "input/MathML"]
     });
   });
    /* ]]> */
    </script>
    <script type="text/javascript">
     /* <![CDATA[ */
   $(document).ready(function(){
     displayResult();
   });
     /* ]]> */
    </script>
     When <math><mi>a</mi><mo>&#x2260;</mo><mn>0</mn></math>,
     there are two solutions to <math>
    <mi>a</mi><msup><mi>x</mi><mn>2</mn></msup>
    <mo>+</mo> <mi>b</mi><mi>x</mi>
    <mo>+</mo> <mi>c</mi> <mo>=</mo> <mn>0</mn>
     </math> and they are
     <math mode="display">
    <mi>x</mi> <mo>=</mo>
    <mrow>
   <mfrac>
     <mrow>
       <mo>&#x2212;</mo>
       <mi>b</mi>
       <mo>&#x00B1;</mo>
       <msqrt>
         <msup><mi>b</mi><mn>2</mn></msup>
         <mo>&#x2212;</mo>
         <mn>4</mn><mi>a</mi><mi>c</mi>
       </msqrt>
     </mrow>
     <mrow> <mn>2</mn><mi>a</mi> </mrow>
   </mfrac>
    </mrow>
    <mtext>.</mtext>
     </math>

     <h2>Simple formula without escape characters [THIS IS THE PROBLEM]</h2>
     <div id="ondivload2" >
     <math id="formula2" mode="display" xmlns="http://www.w3.org/1998/Math/MathML">
     <apply>
    <in/>
    <cn type="complex-cartesian">17<sep/>29</cn>
    <complexes/>
     </apply>
     </math>
   </div><!-- ondivload2 -->

     <h2>Simple formula with escape characters</h2> <br/>
     &lt;math mode="display"&gt;&lt;cn base=&quot;10&quot; type=&quot;integer&quot;&gt;2&lt;/cn&gt;&lt;/math&gt;
     <br/>
     <h2>Formula inserted by manipulating the DOM with javascript</h2>
     <div id="ondivload" >
   <div id="formula">
   </div> <!-- formula -->
     </div> <!-- ondivload -->
   </div> <!-- some-div -->

   <h2>Welcome to your project!</h2>

  <lift:comet type="Chat"/>
</lift:surround>
