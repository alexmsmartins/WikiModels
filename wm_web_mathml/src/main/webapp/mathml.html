<lift:surround with="default" at="content">

    <div id="some-div">
        <script id="mathjax" src="/MathJax/MathJax.js" type="text/javascript" defer="defer">
            /* <![CDATA[ */
            MathJax.Hub.Config({
            config: ["MMLorHTML.js"],
            extensions: ["tex2jax.js", "mml2jax.js"],
            jax: ["input/TeX", "input/MathML"]
            });
            /* ]]> */
        </script>
        <script id="xslttransform" type="text/javascript" defer="defer">s
            /* <![CDATA[ */
            function loadXMLDoc(dname)
            {
            $.log("Executando loadXMLDoc(dname)")
            if (window.XMLHttpRequest)
            {
            xhttp=new XMLHttpRequest();
            }
            else
            {
            xhttp=new ActiveXObject("Microsoft.XMLHTTP");
            }
            xhttp.open("GET",dname,false);
            xhttp.send("");
            return xhttp.responseXML;
            }

            function displayResult()
            {
            xml=loadXMLDoc("mathml_content.xml");
            if(xml == null)
            {
            $.log("xml is null");
            } else {
            $.log("xml not null");
            }

            xsl=loadXMLDoc("/xslt/mathmlc2p.xsl");
            if(xsl == null)
            {
            $.log("xslt is null");
            } else {
            $.log("xslt not null")
            }

            // code for IE
            if (window.ActiveXObject)
            {
            ex=xml.transformNode(xsl);
            document.getElementById("formula").innerHTML=ex;
            }
            // code for Mozilla, Firefox, Opera, etc.
            else if (document.implementation && document.implementation.createDocument)
            {
            xsltProcessor=new XSLTProcessor();
            xsltProcessor.importStylesheet(xsl);
            resultDocument = xsltProcessor.transformToFragment(xml,document);
            document.getElementById("formula").appendChild(resultDocument);
            }
            }
            /* ]]> */
        </script>

        <h2>MathML Editor is bellow this</h2>

        <div>
            <lift:MathMLEdit form="POST">
                <lift:ignore>
                    <!-- TODO LEARN error messages from the framework -->
                </lift:ignore>
                <lift:msgs id="parsing_error"/>

                <link rel="stylesheet" type="text/css" href="css/mathml_editor.css"/>
                <a href="http://www1.chapman.edu/~jipsen/asciimath.html">Help with AsciiMathML</a>

                <p id="parse_success" class="success">Parsing succeded</p>
                <p id="parse_failed" class="error"> Error parsing AsciiMathML</p>
                <div>
                    <visualizer:formulaViz>
                        <span id="form_viz"></span>
                    </visualizer:formulaViz>
                    <editor:formula/>
                </div>
                <br/>
                <br/>
                <br/>
                <br/>
                <br/>
                <br/>
                <br/>
                <br/>
                <br/>
                <editor:submit />
            </lift:MathMLEdit>
        </div>
    </div>
    <!-- end of "some-div"-->
</lift:surround>
