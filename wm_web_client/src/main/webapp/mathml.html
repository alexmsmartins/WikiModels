<!--
  ~ Copyright (c) 2012. Alexandre Martins. All rights reserved.
  -->

<lift:surround with="default" at="content">

    <div id="some-div">
        <h2>Welcome to WikiModels MathML Editor.</h2>

        <div>
            <lift:MathMLEdit form="POST">
            <!-- FIXME recheck the possibility of adding this if there is a way to make it work on webkit
            FIXME this browser conversion is much faster than the one done on the server side -->
            <!--    <head>
                <script id="xslttransform" src="/js/xsltTransformer.js" type="text/javascript">
            </script>
            </head>-->
                <script type="text/x-mathjax-config">
                    /* <![CDATA[ */
                        $.log("MathJax is being configured.");
                        MathJax.Hub.Config({
                          config: ["MMLorHTML.js"],
                          jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML"],
                          extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js"],
                          TeX: {
                            extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
                          },
                          NativeMML: { showMathMenuMSIE: false },
                          menuSettings: { zoom: "Double-Click" },
                          errorSettings: { message: ["[Math Error]"] }
                        });

                    /* ]]> */
                </script>

                <script type="text/javascript"
                        src="http://cdn.mathjax.org/mathjax/latest/MathJax.js">
            /* <![CDATA[ */
            $(document).ready(function() {
                displayResult();
                //TODO replace this function call by Sarissa - http://dev.abiss.gr/sarissa/
                $.log("MathJax is executing");
            });
            /* ]]> */
            </script>

                <link rel="stylesheet" type="text/css" href="/css/mathml_editor.css"/>

                <div class="lift:Msg?id=parsing_error;errorClass=error"></div>
                <a href="http://www1.chapman.edu/~jipsen/asciimath.html">To get help in ASCIIMathML syntax click here.</a>
                <div>
                  <head>
                        <script id="mathml_js" src="/js/mathml_editor.js" type="text/javascript"></script>
                  </head>
                  <editor:formulaViz>
                    <span id="form_viz"></span>
                  </editor:formulaViz>
                  <editor:formula/>
                </div>
                <br/>
                <br/>
                <br/>
                <br/>
                <br/>
                <br/>
                <br/>
                <br/>
                <br/>
                <editor:check />
                <editor:ajax_check />
            </lift:MathMLEdit>
        </div>
    </div> <!-- end of "some-div"-->
</lift:surround>
